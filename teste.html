<!DOCTYPE html>
<html>
<head>
  <title>Cadastro de Usuário</title>
  <!-- Adicione os links para Bootstrap e Firebase (se ainda não os tiver) -->
</head>
<body>
  <div class="container mt-4">
    <h1>Cadastro de Usuário</h1>
    <form id="userForm" class="needs-validation" novalidate>
      <p>FOTO</p>
      <div class="mb-3">
        <label for="name" class="form-label">Descrição</label>
        <input type="text" class="form-control" id="name" required>
      </div>

      <div class="mb-3">
        <label for="age" class="form-label">Endereço</label>
        <input type="number" class="form-control" id="age" required>
      </div>


      <div class="mb-3">
        <label for="age" class="form-label">Cidade/CEP</label>
        <input type="number" class="form-control" id="age" required>
      </div>

      <div class="mb-3">
        <label for="tel" class="form-label">Telefone</label>
        <input type="tel" class="form-control" id="tel" required>
      </div>

      <div class="mb-3">
        <label for="age" class="form-label">Estados que atende</label>
        <input type="number" class="form-control" id="age" required>
      </div>


      <div class="mb-3">
        <label for="age" class="form-label">Formas de ajudar</label>
        <input type="number" class="form-control" id="age" required>
      </div>

      <button type="submit" class="btn btn-primary">Enviar</button>
    </form>
  </div>

  <div class="container mt-4">
    <h2>Dados cadastrados</h2>
    <ul id="userDataList"></ul>
  </div>

  <!-- Adicione os scripts do Bootstrap e do Firebase (se ainda não os tiver) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <!-- Substitua as informações abaixo pelas suas credenciais do Firebase -->
  <script>

const firebaseConfig = {
  apiKey: "AIzaSyDkgwXqmu2FXCn856hH3J68m_Ju2kwpW_0",
  authDomain: "forcadoberm.firebaseapp.com",
  databaseURL: "https://forcadoberm-default-rtdb.firebaseio.com",
  projectId: "forcadoberm",
  storageBucket: "forcadoberm.appspot.com",
  messagingSenderId: "990008156205",
  appId: "1:990008156205:web:99da9a412825c7f59498a4"
};


// Inicialize o Firebase
firebase.initializeApp(firebaseConfig);

// Obtenha referência para o Firestore
var db = firebase.firestore();

// Captura o formulário e adiciona um ouvinte para o evento "submit"
var userForm = document.getElementById("userForm");
userForm.addEventListener("submit", function (event) {
  event.preventDefault();
  event.stopPropagation();

  // Verifica se o formulário é válido
  if (userForm.checkValidity()) {
    // Obtém os valores dos campos do formulário
    var name = document.getElementById("name").value;
    var age = document.getElementById("age").value;
    var tel = document.getElementById("tel").value;

    // Envia os dados para o Firebase
    db.collection("users").add({
      name: name,
      age: age,
      tel: tel
    })
    .then(function(docRef) {
      console.log("Documento adicionado com ID: ", docRef.id);

      // Limpa o formulário após o envio dos dados
      userForm.reset();
    })
    .catch(function(error) {
      console.error("Erro ao adicionar documento: ", error);
    });
  }

  // Marca o formulário como "checkValidity" para exibir os estilos de validação do Bootstrap
  userForm.classList.add("was-validated");
});

// Ouvinte para atualizar a lista de dados cadastrados no Firebase
db.collection("users").onSnapshot(function(querySnapshot) {
  var userDataList = document.getElementById("userDataList");
  userDataList.innerHTML = ""; // Limpa a lista antes de recriá-la

  querySnapshot.forEach(function(doc) {
    var userData = doc.data();
    var listItem = document.createElement("li");
    listItem.textContent = "Nome: " + userData.name + ", Idade: " + userData.age + ", Telefone: " + userData.tel;
    userDataList.appendChild(listItem);
  });
});
</script>
</body>
</html>
